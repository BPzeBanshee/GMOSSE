<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-9999</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*
I realise that this controller looks incredibly complicated.

It sort-of still is, but it's more organised (thus the many events)
than what it was before, and in terms of getting stuff to work
it is easier.

Why do I say this? Because all of the GMFMODSimple-specific commands
are called here. Other objects make this one call the User-Defined
events to play the music that they want and they don't have to know
what sound engine you're using. All fade effects and switching of music
along with music information is loaded here.

And as for sound effects, they don't use GMFMODSimple anymore.
They not only have their own separate controller for loading sounds
now, but they've been switched to GM's internal sound engine, and
have their own playing script to get rid of the 'roar effect' present
in older releases. You don't need to worry about them in this object.
*/
globalvar music; 
music = 0;

e = AInit();
if e = -1
    {
    show_message("Error loading GMALP.DLL");
    instance_destroy();
    }

timer = 360;
alpha = 0;
info = -1; // init variable for music loading scripts
mainmenu = 0;
gameover = 0;

scr_setvolsnd();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>AUpdate(); // Compulsory part of GMALP
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="23">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// OMAKE BOSS THEME 3
timer = 0;
alpha = 0;
scr_stopmusic(music);

info = scr_loadmusicinfo(global.music_ini,"Omake3");
music = scr_playmusic(global.snd_omake3,1);
scr_setvolmusic(music);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="22">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// OMAKE BOSS THEME 2
timer = 0;
alpha = 0;
scr_stopmusic(music);

// Fun fact: this one actually came first, I just named it omake2 to fit with stage order
info = scr_loadmusicinfo(global.music_ini,"Omake2");
music = scr_playmusic(global.snd_omake2,1);
scr_setvolmusic(music);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="21">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// OMAKE BOSS THEME 1
timer = 0;
alpha = 0;
scr_stopmusic(music);

info = scr_loadmusicinfo(global.music_ini,"Omake1");
music = scr_playmusic(global.snd_omake1,1);
scr_setvolmusic(music);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="16">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// GAME OVER MUSIC
timer = 0;
alpha = 0;
scr_stopmusic(music);

info = scr_loadmusicinfo(global.music_ini,"GameOver");
music = scr_playmusic(global.snd_gameover,0);
scr_setvolmusic(music);
gameover = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="15">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// CONTINUE MUSIC 
// Call once to play, call again to stop
if instance_exists(obj_ctrl_continue)
    {
    scr_stopmusic(music2);
    exit;
    }
else
    {
    timer = 0;
    alpha = 0;
    info = scr_loadmusicinfo(global.music_ini,"Continue");
    music2 = scr_playmusic(global.snd_continue,0);
    scr_setvolmusic(music);
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="14">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// STAGE CLEAR MUSIC
timer = 0;
alpha = 0;

scr_stopmusic(music);
info = scr_loadmusicinfo(global.music_ini,"StageComplete");
music = scr_playmusic(global.snd_stageclear,0);
scr_setvolmusic(music);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// BIG BOSS THEME (STAGE 3)
if instance_exists(obj_ctrl_gameover) then exit;

timer = 0;
alpha = 0;

scr_stopmusic(music);
info = scr_loadmusicinfo(global.music_ini,"Stage3_B");
music = scr_playmusic(global.snd_st3b,1);
scr_setvolmusic(music);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// BOSS THEME
if instance_exists(obj_ctrl_gameover) then exit;

timer = 0;
alpha = 0;

scr_stopmusic(music);
info = scr_loadmusicinfo(global.music_ini,"Boss1");
music = scr_playmusic(global.snd_boss,1);
scr_setvolmusic(music);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.update exit;

/* Stop the currently playing track */
if room != rm_scores &amp;&amp; global.nextroom != rm_scores
    {
    scr_stopallmusic();
    music = 0;
    } 

// Stage-specific music to free
if room = rm_stage1
    {
    scr_freemusic(global.snd_st1); global.snd_st1 = 0;
    scr_freemusic(global.snd_omake1); global.snd_omake1 = 0;
    }
if room = rm_stage2
    {
    scr_freemusic(global.snd_st2); global.snd_st2 = 0;
    scr_freemusic(global.snd_omake2); global.snd_omake2 = 0;
    }
if room = rm_stage3
    {
    scr_freemusic(global.snd_st3); global.snd_st3 = 0;
    scr_freemusic(global.snd_st3b); global.snd_st3b = 0;
    scr_freemusic(global.snd_omake3); global.snd_omake3 = 0;
    }
    
    
/* Music to load/music info to show in certain rooms */

if global.nextroom = rm_menu
    {
    // Freeing generic sounds
    if gameover = 1 // rm_scores after game over, leaving to menu from pause menu
        {
        scr_freemusic(global.snd_boss); global.snd_boss = 0;
        scr_freemusic(global.snd_stageclear); global.snd_stageclear = 0;
        scr_freemusic(global.snd_continue); global.snd_continue = 0;
        scr_freemusic(global.snd_gameover); global.snd_gameover = 0;
        gameover = 0;
        }
        
    // Loading intro music
    if mainmenu = 0 // first start of GMOSSE
        {
        global.snd_intro = scr_loadmusic("Intro");
        info = scr_loadmusicinfo(global.music_ini,"Intro");
        }
    }    
    
if global.nextroom = rm_shipselect
    {
    // Freeing intro if loaded
    if mainmenu = 1
        {
        scr_freemusic(global.snd_intro); global.snd_intro = 0;
        mainmenu = 2; // set to 0 if you want intro to be loaded/played again on return
        }
        
    // Loading ship select music
    global.snd_shipselect = scr_loadmusic("Selection");
    info = scr_loadmusicinfo(global.music_ini,"Selection");
    }
    
if room = rm_shipselect
    {
    // Freeing ship select music when leaving the room
    scr_freemusic(global.snd_shipselect); global.snd_shipselect = 0;
    
    // Loading generic music
    global.snd_boss = scr_loadmusic("Boss1");
    global.snd_stageclear = scr_loadmusic("StageComplete");
    global.snd_continue = scr_loadmusic("Continue");
    global.snd_gameover = scr_loadmusic("GameOver");
    }
    
// Stage specific music to load
if global.nextroom = rm_stage1 || global.nextroom = rm_boss1
    {
    global.snd_st1 = scr_loadmusic("Stage1");
    info = scr_loadmusicinfo(global.music_ini,"Stage1");
    global.snd_omake1 = scr_loadmusic("Omake1");
    }
        
if global.nextroom = rm_stage2 || global.nextroom = rm_boss2
    {
    global.snd_st2 = scr_loadmusic("Stage2");
    info = scr_loadmusicinfo(global.music_ini,"Stage2");
    global.snd_omake2 = scr_loadmusic("Omake2");
    }
    
if global.nextroom = rm_stage3
    {
    global.snd_st3 = scr_loadmusic("Stage3");
    info = scr_loadmusicinfo(global.music_ini,"Stage3");
    global.snd_st3b = scr_loadmusic("Stage3_B");
    global.snd_omake3 = scr_loadmusic("Omake3");
    }
    
if global.nextroom = rm_omake1
    {
    global.snd_omake1 = scr_loadmusic("Omake1");
    info = scr_loadmusicinfo(global.music_ini,"Omake1");
    }
    
if global.nextroom = rm_omake2 || global.nextroom = rm_test2
    {
    global.snd_omake2 = scr_loadmusic("Omake2");
    info = scr_loadmusicinfo(global.music_ini,"Omake2");
    }
    
if global.nextroom = rm_omake3 || global.nextroom = rm_test1
    {
    global.snd_omake3 = scr_loadmusic("Omake3");
    info = scr_loadmusicinfo(global.music_ini,"Omake3");
    }
    
scr_setvolsnd();    
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if global.update exit;
timer = 0;
alpha = 0;

// MAIN MENU
if room = rm_menu
    {
    timer = 360;
    if mainmenu = 0
        {
        music = scr_playmusic(global.snd_intro,0);
        mainmenu = 1;
        }
    }

// SHIP SELECT MENU
if room = rm_shipselect then music = scr_playmusic(global.snd_shipselect,1);

// STAGE 1
if room = rm_stage1 || room = rm_boss1 then music = scr_playmusic(global.snd_st1,1);
    
// STAGE 2
if room = rm_stage2 || room = rm_boss2 then music = scr_playmusic(global.snd_st2,1);
    
// STAGE 3
if room = rm_stage3 then music = scr_playmusic(global.snd_st3,1);
    
// TEST ROOM STAGES
if room = rm_test1 || room = rm_test2 
|| room = rm_omake1 || room = rm_omake2 
|| room = rm_omake3 || room = rm_tutorial
    {
    scr_stopallmusic();
    timer = 360;
    }
    
scr_setvolmusic(music);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_stopallmusic();
ASourceFreeAll();
AFree();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if room = rm_init || info != 0 then exit;
var oa; oa = draw_get_alpha();
scr_draw_vars(global.fnt_little,fa_left,make_color_rgb(90,130,255));

if !instance_exists(obj_ctrl_pause)
    {
    timer += 1;
    if timer &lt; 360 &amp;&amp; alpha &lt; 1 then alpha += 0.01;
    if timer &gt; 360 &amp;&amp; alpha &gt; 0 then alpha -= 0.01;
    }
draw_set_alpha(alpha);

if global.room_id &gt; 251 //menus
    {
    draw_text(xview,yview+300,"* "+string(global.music_info[5]));
    if timer &lt; 180
    then draw_text(xview,yview+310,"* "+string(global.music_info[6]));
    else draw_text(xview,yview+310,"* "+string(global.music_info[7]));
    }
if global.room_id &lt; 251 //ingame
    {
    draw_text(xview,yview+285,"* "+string(global.music_info[5]));
    if timer &lt; 180 
    then draw_text(xview,yview+295,"* "+string(global.music_info[6]))
    else draw_text(xview,yview+295,"* "+string(global.music_info[7]));    
    }
draw_set_alpha(oa);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
