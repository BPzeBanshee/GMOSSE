<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_boss</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_en_parent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Compulsory
enemyHP = 1200;
event_inherited();

timeout = 5000;
scr_create_healthbar();

// Movement-related variables
image_speed = 0.1;
vspeed = 2;
move_timer = 0; 

// Attack related variables
phase = 0;
made = 0;
count = 0;
atk_timer = 0;
atk2_timer = 2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*************THE PLAN***********
*attack pattern 1*
There is no actual attacking involved. 
This is the spawn handling, where the main orb moves down 
and after a second (move_timer=60) creates the green outer orb, 
which will perform the REAL first attack pattern. 
The green orb will determine when to initiate
the main orb's second attack pattern.

*attack pattern 2*
This is the circle attack using S20-TBL's script, in turn 
based off some guy called GodHand from the YoyoGames forums. 
Red bullets will appear on the outer edges of the main orb 
and shoot 10 times before going to its next attack pattern immediately.

*attack pattern 3*
Again, no attack directly involved. 
It spawns the second, purple orb which will do the
attacking in co-ordination with the green orb. 
The purple orb will determine when to initiate the next attack pattern.

*attack pattern 4*
Launches special bullets in a loose circle pattern 
(like attack pattern 2 but less dense)
which due to passing the bullettype variable to the 
special bullets will explode into more bullets. 
Similar to DodonPachi Dai-Ou-Jou's Stage 1 boss canister attacks.*/

// Aesthetics
thr = scr_basicshot(x,y,obj_en_thr,irandom_range(5,7),irandom_range(240,300));
thr.depth = depth + 1;
thr.image_xscale = irandom_range(2,4);
thr.image_yscale = thr.image_xscale;
thr.image_angle = random(360);
thr.image_speed = 0.5;

// Timeout
if timeout &gt; 0 then timeout -= 1;
if timeout = 0 then phase = 7;

// Movement-related code
move_timer += 1;
if move_timer = 60 then vspeed = 0;
if move_timer &lt; 60 then enemyHP = enemyHP_max;

// Attack behaviour
switch phase
    {
    case 0: // Entry onto screen, create first orb
        { 
        if move_timer = 60
            {
            orb1 = instance_create(x,y,obj_orb);
            orb1.hspeed = 2;
            made = 1;
            phase = 1; 
            }
        break;
        }
    case 1: // ##ATTACK PHASE 1##
        { 
        if instance_exists(orb1)
            {
            if orb1.timer &gt;= 30 then orb1.phase = 1; // execute attack once spinning
            if orb1.count2 &gt;= 4
                {
                orb1.phase = 0;
                phase = 2; // go to next phase
                }
            }
        else phase = 4; // if orb is destroyed fast, skip to fourth phase
        break;
        }
    case 2: // ##ATTACK PHASE 2##
        { 
        atk_timer += 1;
        if atk_timer = 60
            {
            scr_circleattack(36,x,y,0,obj_bullet2,obj_hitbox,6,false);
            scr_playsnd(snd_en_shot2,1);
            atk_timer = 30;
            count += 1;
            }
        if count = 10
            {
            atk_timer = 0;
            count = 0;
            if made &lt; 2 then phase = 3 else phase = 4;
            }
        break;
        }
    case 3: // create second orb
        {
        orb2 = instance_create(x,y,obj_orb2); 
        orb2.hspeed = -2;
        made = 2;
        phase = 4;
        break;
        }
    case 4: // ##ATTACK PHASE 3##
        {
        if instance_exists(orb1)
            {
            orb1.phase = 2;
            orb2.phase = 1;
            if orb1.count = 20 &amp;&amp; orb2.count = 4
                {
                orb1.phase = 0;
                orb2.phase = 0;
                phase = 1;
                }
            }
        else
            {
            orb2.phase = 2;
            phase = 5;
            }
        break;
        }
    case 5: // ##ATTACK PHASE 4##
        {
        if !instance_exists(orb2) then phase = 6;
        break;
        }
    case 6: // ##FINAL ATTACK PHASE##
        { 
        global.omake_enabled = 1;
        atk2_timer -= 1;
        if atk2_timer = 0
            {
            blast = scr_circleattack(90,x,y,0,obj_bullet_shoot,obj_hitbox,10,false);
            with obj_bullet_shoot
                {
                btype = 2;
                friction = 0.4;
                }
            scr_playsnd(snd_exp1,1);
            atk2_timer = 180;
            }  
        break;
        }
    case 7: // TIMEOUT
        {
        y -= 1;
        if instance_exists(orb1)
            {
            orb1.mode = 3; 
            orb1.y -= 1;
            }
        if instance_exists(orb2)
            {
            orb2.mode = 3;
            orb2.y -= 1;
            }
        direction = 90;
        if y &lt; yview-sprite_width/2 then instance_destroy();
        break;
        }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// This changes the orb from its current form to its death object which handles things such
// as bonuses to chains and score. This event is called by its parent object, which all enemy
// objects share: obj_enemytarget.
instance_create(x,y,obj_boss_dead);
scr_addscore(100000,180,1);
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
